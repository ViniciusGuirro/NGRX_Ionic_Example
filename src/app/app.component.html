<ion-content>
  <ion-row>
    <ion-col size="12">
      <app-add-user></app-add-user>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="(users$ | async)?.length === 0 && !(isSaving$ | async) && !(isDeleting$ | async)">
    <ion-col class="ion-text-center" size="12">
      <ion-label class="labelNoUsers">Não há usuários cadastrados na base ainda, cadastre agora :)</ion-label>
    </ion-col>
  </ion-row>

  <ion-row *ngFor="let user of (users$ | async)">
    <ion-col *ngIf="!isUpdatingUser" size="10">
      <ion-label>Name: {{user.name}}</ion-label>
      <br />
      <ion-label>Age: {{user.age}}</ion-label>
      <br />
      <ion-label>Genre: {{user.genre}}</ion-label>
      <br />
      <ion-label>Profession: {{user.profession}}</ion-label>
      <br />
    </ion-col>

    <ion-col *ngIf="isUpdatingUser" size="10">
      <form [formGroup]="form" class="align-items-center">
        <ion-list class="ion-padding-horizontal">
          <ion-item>
            <ion-input placeholder="Name" label="Name" labelPlacement="floating" type="text"
              formControlName="name"></ion-input>
          </ion-item>

          <ion-item>
            <ion-input placeholder="Profession" label="Profession" labelPlacement="floating"
              formControlName="profession" type="text"></ion-input>
          </ion-item>

          <ion-item>
            <ion-input placeholder="Age" label="Age" labelPlacement="floating" formControlName="age"
              type="number"></ion-input>
          </ion-item>

          <ion-item>
            <ion-input placeholder="Genre" label="Genre" labelPlacement="floating" formControlName="genre"
              type="text"></ion-input>
          </ion-item>
        </ion-list>
      </form>
    </ion-col>

    <ion-col *ngIf="!isUpdatingUser" class="colIcon" size="2">
      <ion-icon (click)="removeuser(user)" color="danger" name="remove-circle-outline"></ion-icon>
      <br />
      <br />
      <ion-icon (click)="openUpdateForm(user)" color="success" name="create-outline"></ion-icon>
    </ion-col>

    <ion-col *ngIf="isUpdatingUser" class="colIcon" size="2">
      <ion-icon (click)="updateuser(user)" color="success" name="checkmark-circle-outline"></ion-icon>
      <br />
      <br />
      <ion-icon (click)="isUpdatingUser = false" color="danger" name="close-circle-outline"></ion-icon>
    </ion-col>

  </ion-row>

  <ion-spinner *ngIf="(isSaving$ | async) || (isDeleting$ | async) || (isUpdating$ | async)" name="bubbles"></ion-spinner>
</ion-content>